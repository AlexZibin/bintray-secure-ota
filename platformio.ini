; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter, extra scripting
;   Upload options: custom port, speed and extra flags
;   Library options: dependencies, extra library storages
;
; Please visit documentation for the other options and examples
; http://docs.platformio.org/page/projectconf.html

[platformio]
env_default = debug

;
; Configuration
; PLEASE REPLACE ALL (bintray/wifi) *** WITH REAL VALUES
;

; Please navigate to https://bintray.com/, create an account,
; repository, and add a package where PlatformIO will deploy firmwares
; api_token =  Bintray.com > Edit Profile > API Key
[bintray]
user = ***
repository = ***
package = ***
api_token = ***

; Wi-Fi network settings
[wifi]
ssid = ***
password = ***

[common]
; firmware version, please modify it between releases
; positive integer value
version = 0

; build configuration based on Bintray and Wi-Fi settings
build_flags =
    '-DWIFI_SSID="${wifi.ssid}"'
    '-DWIFI_PASS="${wifi.password}"'
    '-DBINTRAY_USER="${bintray.user}"'
    '-DBINTRAY_REPO="${bintray.repository}"'
    '-DBINTRAY_PACKAGE="${bintray.package}"'
    -DVERSION=${common.version}

; extra dependencies
lib_deps = ArduinoJson

;
; Build environments
;

[env:debug]
platform = espressif32
framework = arduino
board = esp32dev
build_flags = ${common.build_flags}
lib_deps = ${common.lib_deps}
monitor_baud = 115200
upload_speed = 921600
; upload_protocol = olimex-arm-usb-tiny-h
; debug_tool = olimex-arm-usb-tiny-h

[env:release]
platform = espressif32
framework = arduino
board = esp32dev
build_flags = ${common.build_flags}
lib_deps = ${common.lib_deps}
upload_protocol = custom
extra_scripts = pre:publish_firmware.py
